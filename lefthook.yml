# Lefthook configuration
# https://github.com/evilmartians/lefthook

# Dependency: golangci-lint, lefthook, and cog (Cocogitto)
# Setup: lefthook install

pre-commit:
  parallel: true
  jobs:
    - name: "Run linter"
      glob: "*.go"
      run: golangci-lint run --fix {staged_files} && git add {staged_files}

    - name: "Check formatting"
      glob: "*.go"
      run: golangci-lint fmt --diff {staged_files}

commit-msg:
  jobs:
    - name: "Check commit message"
      run: cog verify --file {1}
